{% extends 'base.html' %}
{% load static %}

{% block content %}
<section class="contact-section py-5">
    <div class="container">
        <!-- 3D Animated Header -->
        <div class="text-center mb-5">
            <h2 class="mb-3 animate-3d">Get In Touch</h2>
            <p class="subheading animate-3d" data-delay="0.2s">We'd love to hear from you! Send us a message and we'll respond as soon as possible.</p>
        </div>

        {% if messages %}
            {% for message in messages %}
                <div class="alert-3d alert alert-success alert-dismissible fade show" role="alert">
                    <div class="d-flex align-items-center">
                        <i class="fas fa-check-circle me-2"></i>
                        <div>{{ message }}</div>
                    </div>
                    <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
                </div>
            {% endfor %}
        {% endif %}

        <div class="row justify-content-center">
            <div class="col-lg-10">
                <div class="card contact-card-3d">
                    <div class="card-body p-4 p-md-5">
                        <form method="post" class="contact-form">
                            {% csrf_token %}
                            <div class="row">
                                <div class="col-md-6 mb-4">
                                    <div class="form-floating-3d">
                                        {{ form.name }}
                                        {{ form.name.label_tag }}
                                        <div class="form-icon">
                                            <i class="fas fa-user"></i>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-6 mb-4">
                                    <div class="form-floating-3d">
                                        {{ form.email }}
                                        {{ form.email.label_tag }}
                                        <div class="form-icon">
                                            <i class="fas fa-envelope"></i>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="mb-4">
                                <div class="form-floating-3d">
                                    {{ form.subject }}
                                    {{ form.subject.label_tag }}
                                    <div class="form-icon">
                                        <i class="fas fa-tag"></i>
                                    </div>
                                </div>
                            </div>
                            <div class="mb-4">
                                <div class="form-floating-3d">
                                    {{ form.message }}
                                    {{ form.message.label_tag }}
                                    <div class="form-icon textarea-icon">
                                        <i class="fas fa-comment"></i>
                                    </div>
                                </div>
                            </div>
                            <div class="text-center mt-4">
                                <button type="submit" class="btn btn-3d btn-primary btn-lg send-button">
                                    <span class="button-text">Send Message</span>
                                    <div class="button-icon">
                                        <i class="fas fa-paper-plane"></i>
                                    </div>
                                </button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>

        <!-- 3D Contact Info Cards -->
        <div class="row text-center mt-5">
            <div class="col-md-4 mb-4 mb-md-0">
                <div class="info-card-3d" data-tilt>
                    <div class="info-icon-3d mb-4">
                        <i class="fas fa-map-marker-alt"></i>
                    </div>
                    <h5>Location</h5>
                    <p class="mb-0">Dhaka, Bangladesh</p>
                </div>
            </div>
            <div class="col-md-4 mb-4 mb-md-0">
                <div class="info-card-3d" data-tilt data-tilt-max="5">
                    <div class="info-icon-3d mb-4">
                        <i class="fas fa-phone"></i>
                    </div>
                    <h5>Phone Number</h5>
                    <p class="mb-0">+88 016 25 1925 69</p>
                </div>
            </div>
            <div class="col-md-4">
                <div class="info-card-3d" data-tilt data-tilt-max="5">
                    <div class="info-icon-3d mb-4">
                        <i class="fas fa-envelope-open"></i>
                    </div>
                    <h5>Email Address</h5>
                    <p class="mb-0">ashrafuzzamansrabon@gmail.com</p>
                </div>
            </div>
        </div>

        <!-- Social Media Links -->
        <div class="text-center mt-5">
            <h4 class="mb-4">Follow Us</h4>
            <div class="social-links">
                <a href="https://facebook.com/ashrafuzzaman.srabon.5" class="social-link-3d" data-tilt data-tilt-scale="1.1"><i class="fab fa-facebook-f"></i></a>
                <a href="#" class="social-link-3d" data-tilt data-tilt-scale="1.1"><i class="fab fa-twitter"></i></a>
                <a href="https://instagram.com/ashrafuzzaman_srabon" class="social-link-3d" data-tilt data-tilt-scale="1.1"><i class="fab fa-instagram"></i></a>
                <a href="#" class="social-link-3d" data-tilt data-tilt-scale="1.1"><i class="fab fa-linkedin-in"></i></a>
                <a href="https://github.com/ajsrabon99" class="social-link-3d" data-tilt data-tilt-scale="1.1"><i class="fab fa-github"></i></a>
            </div>
        </div>
    </div>
</section>

<style>
    /* Base styles and variables */
    :root {
        --primary-color: #6366f1;
        --primary-light: #818cf8;
        --primary-dark: #4f46e5;
        --secondary-color: #6c757d;
        --success-color: #10b981;
        --dark-bg: #0f172a;
        --dark-secondary: #1e293b;
        --dark-text: #e2e8f0;
        --dark-border: #334155;
        --light-bg: #f8fafc;
        --light-text: #475569;
        --light-border: #e2e8f0;
        --transition: all 0.3s ease;
        --shadow: 0 10px 25px rgba(0,0,0,0.1);
        --shadow-hover: 0 15px 35px rgba(0,0,0,0.2);
    }

    .dark-mode {
        --bg-color: var(--dark-bg);
        --text-color: var(--dark-text);
        --card-bg: var(--dark-secondary);
        --border-color: var(--dark-border);
        --input-bg: #1a243b;
        --input-border: var(--dark-border);
        --input-text: var(--dark-text);
        --shadow: 0 10px 25px rgba(0,0,0,0.25);
        --shadow-hover: 0 15px 35px rgba(0,0,0,0.3);
    }

    .light-mode {
        --bg-color: var(--light-bg);
        --text-color: var(--light-text);
        --card-bg: #ffffff;
        --border-color: var(--light-border);
        --input-bg: #ffffff;
        --input-border: var(--light-border);
        --input-text: var(--light-text);
    }

    body {
        background-color: var(--bg-color);
        color: var(--text-color);
        transition: var(--transition);
        font-family: 'Inter', sans-serif;
    }

    /* 3D Animations */
    @keyframes float3d {
        0% { transform: translateY(0) rotateX(0) rotateY(0); }
        50% { transform: translateY(-10px) rotateX(5deg) rotateY(5deg); }
        100% { transform: translateY(0) rotateX(0) rotateY(0); }
    }

    @keyframes pulse3d {
        0% { transform: scale(1) rotateX(0); }
        50% { transform: scale(1.05) rotateX(5deg); }
        100% { transform: scale(1) rotateX(0); }
    }

    @keyframes alert3d {
        0% { transform: scale(0.5) rotateY(90deg); opacity: 0; }
        50% { transform: scale(1.05) rotateY(-10deg); }
        100% { transform: scale(1) rotateY(0); opacity: 1; }
    }

    .animate-3d {
        opacity: 0;
        transform: perspective(1000px) rotateX(10deg) translateY(20px);
        animation: fadeIn3d 1s forwards;
    }

    @keyframes fadeIn3d {
        to {
            opacity: 1;
            transform: perspective(1000px) rotateX(0) translateY(0);
        }
    }

    [data-delay="0.2s"] { animation-delay: 0.2s; }
    [data-delay="0.4s"] { animation-delay: 0.4s; }

    /* 3D Contact Card */
    .contact-card-3d {
        background: var(--card-bg);
        border: none;
        border-radius: 20px;
        box-shadow: var(--shadow);
        transition: var(--transition);
        transform-style: preserve-3d;
        perspective: 1000px;
        overflow: hidden;
    }

    .contact-card-3d:hover {
        box-shadow: var(--shadow-hover);
        transform: translateY(-5px) rotateX(2deg) rotateY(2deg);
    }

    /* 3D Form Elements */
    .form-floating-3d {
        position: relative;
        transform-style: preserve-3d;
    }

    .form-floating-3d > label {
        color: var(--text-color);
        padding-left: 50px;
        transform-origin: left center;
        transition: var(--transition);
    }

    .form-floating-3d > .form-control {
        background-color: var(--input-bg);
        border: 2px solid var(--input-border);
        color: var(--input-text);
        padding-left: 50px;
        height: calc(3.5rem + 4px);
        line-height: 1.25;
        border-radius: 12px;
        transition: var(--transition);
        transform-style: preserve-3d;
        transform: translateZ(10px);
    }

    .form-floating-3d > .form-control:focus {
        box-shadow: 0 0 0 4px rgba(99, 102, 241, 0.2);
        border-color: var(--primary-color);
        transform: translateZ(20px);
    }

    .form-floating-3d textarea.form-control {
        height: auto;
        min-height: 160px;
        padding-top: 1.5rem;
        transform: translateZ(5px);
    }

    .form-icon {
        position: absolute;
        left: 18px;
        top: 50%;
        transform: translateY(-50%) translateZ(20px);
        color: var(--primary-color);
        z-index: 5;
        transition: var(--transition);
    }

    .form-floating-3d > .form-control:focus ~ .form-icon {
        color: var(--primary-light);
        transform: translateY(-50%) translateZ(30px) scale(1.1);
    }

    .textarea-icon {
        top: 28px;
        transform: none;
    }

    /* 3D Button */
    .btn-3d {
        position: relative;
        overflow: hidden;
        padding: 14px 35px;
        border-radius: 12px;
        border: none;
        background: linear-gradient(135deg, var(--primary-color), var(--primary-dark));
        transition: var(--transition);
        transform-style: preserve-3d;
        perspective: 500px;
        box-shadow: 0 10px 20px rgba(79, 70, 229, 0.3);
    }

    .btn-3d:hover {
        transform: translateY(-3px) rotateX(5deg);
        box-shadow: 0 15px 30px rgba(79, 70, 229, 0.4);
        background: linear-gradient(135deg, var(--primary-light), var(--primary-color));
    }

    .btn-3d:active {
        transform: translateY(1px) rotateX(0);
        box-shadow: 0 5px 15px rgba(79, 70, 229, 0.3);
    }

    .btn-3d .button-icon {
        position: absolute;
        right: -20px;
        top: 50%;
        transform: translateY(-50%) translateZ(20px);
        opacity: 0;
        transition: var(--transition);
    }

    .btn-3d:hover .button-icon {
        right: 20px;
        opacity: 1;
        transform: translateY(-50%) translateZ(30px);
    }

    .btn-3d::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: linear-gradient(rgba(255,255,255,0.1), rgba(255,255,255,0.05));
        clip-path: polygon(0 0, 100% 0, 100% 70%, 0 100%);
        transform: translateZ(15px);
        transition: var(--transition);
    }

    /* 3D Info Cards */
    .info-card-3d {
        background: var(--card-bg);
        padding: 30px 20px;
        border-radius: 16px;
        box-shadow: var(--shadow);
        transition: var(--transition);
        transform-style: preserve-3d;
        height: 100%;
    }

    .info-card-3d:hover {
        transform: translateY(-8px) rotateX(5deg);
        box-shadow: var(--shadow-hover);
    }

    .info-icon-3d {
        width: 70px;
        height: 70px;
        margin: 0 auto;
        background: linear-gradient(135deg, var(--primary-color), var(--primary-dark));
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        color: white;
        font-size: 1.8rem;
        box-shadow: 0 5px 15px rgba(79, 70, 229, 0.3);
        transform: translateZ(20px);
        transition: var(--transition);
    }

    .info-card-3d:hover .info-icon-3d {
        transform: translateZ(30px) scale(1.1);
        animation: pulse3d 2s infinite;
    }

    /* 3D Social Links */
    .social-links {
        display: flex;
        justify-content: center;
        gap: 15px;
        margin-top: 20px;
    }

    .social-link-3d {
        width: 50px;
        height: 50px;
        display: flex;
        align-items: center;
        justify-content: center;
        background: var(--card-bg);
        color: var(--primary-color);
        border-radius: 50%;
        text-decoration: none;
        box-shadow: var(--shadow);
        transition: var(--transition);
        transform-style: preserve-3d;
    }

    .social-link-3d:hover {
        background: var(--primary-color);
        color: white;
        transform: translateY(-5px) rotate(5deg);
        box-shadow: var(--shadow-hover);
    }

    /* 3D Alert */
    .alert-3d {
        border: none;
        border-radius: 12px;
        box-shadow: var(--shadow);
        animation: alert3d 0.6s forwards;
        transform-style: preserve-3d;
        transform: perspective(1000px);
    }

    /* Responsive adjustments */
    @media (max-width: 768px) {
        .contact-card-3d {
            margin: 0 10px;
        }
        
        .btn-3d {
            width: 100%;
        }
        
        .btn-3d:hover {
            padding: 14px 35px;
        }
        
        .btn-3d:hover .button-icon {
            right: -20px;
            opacity: 0;
        }
        
        .form-icon {
            left: 15px;
        }
        
        .social-links {
            flex-wrap: wrap;
        }
    }
</style>

<!-- Include vanilla-tilt.js for 3D effects -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/vanilla-tilt/1.7.2/vanilla-tilt.min.js"></script>

<!-- Include Font Awesome -->
<script src="https://kit.fontawesome.com/a076d05399.js" crossorigin="anonymous"></script>

<script>
    document.addEventListener('DOMContentLoaded', function() {
        // Check if dark mode is enabled
        if (localStorage.getItem('darkMode') === 'enabled') {
            document.body.classList.add('dark-mode');
            document.body.classList.remove('light-mode');
        } else {
            document.body.classList.add('light-mode');
            document.body.classList.remove('dark-mode');
        }
        
        // Initialize vanilla-tilt.js for 3D effects
        if (typeof VanillaTilt !== 'undefined') {
            VanillaTilt.init(document.querySelectorAll('[data-tilt]'), {
                max: 5,
                speed: 400,
                glare: true,
                'max-glare': 0.1,
                scale: 1.05
            });
        }
        
        // Add 3D animation to the contact card
        const contactCard = document.querySelector('.contact-card-3d');
        if (contactCard) {
            contactCard.addEventListener('mousemove', function(e) {
                const card = this;
                const cardRect = card.getBoundingClientRect();
                const x = e.clientX - cardRect.left;
                const y = e.clientY - cardRect.top;
                
                const centerX = cardRect.width / 2;
                const centerY = cardRect.height / 2;
                
                const rotateY = (x - centerX) / centerX * 3;
                const rotateX = (centerY - y) / centerY * 3;
                
                card.style.transform = `perspective(1000px) rotateX(${rotateX}deg) rotateY(${rotateY}deg) translateZ(10px)`;
            });
            
            contactCard.addEventListener('mouseleave', function() {
                this.style.transform = 'perspective(1000px) rotateX(0) rotateY(0) translateZ(0)';
            });
        }
        
        // Add floating animation to elements
        const floatingElements = document.querySelectorAll('.animate-3d');
        floatingElements.forEach(el => {
            el.style.animationDelay = el.getAttribute('data-delay') || '0s';
        });
        
        // Add pulse animation to info icons on hover
        const infoIcons = document.querySelectorAll('.info-icon-3d');
        infoIcons.forEach(icon => {
            icon.addEventListener('mouseenter', function() {
                this.style.animation = 'pulse3d 2s infinite';
            });
            
            icon.addEventListener('mouseleave', function() {
                this.style.animation = 'none';
            });
        });
        
        // Add 3D effect to form inputs on focus
        const formInputs = document.querySelectorAll('.form-control');
        formInputs.forEach(input => {
            input.addEventListener('focus', function() {
                this.parentElement.style.transform = 'translateZ(20px)';
            });
            
            input.addEventListener('blur', function() {
                this.parentElement.style.transform = 'translateZ(0)';
            });
        });
    });
</script>
{% endblock %}